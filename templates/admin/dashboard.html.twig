{% extends '@EasyAdmin/layout.html.twig' %}

{% block main %}
	<h1>Dashboard</h1>

	<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
		<li class="nav-item" role="presentation">
			<button class="nav-link active" id="pills-teams-tab" data-bs-toggle="pill" data-bs-target="#pills-teams" type="button" role="tab" aria-controls="pills-teams" aria-selected="true">Escuderías</button>
		</li>
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="pills-drivers-tab" data-bs-toggle="pill" data-bs-target="#pills-drivers" type="button" role="tab" aria-controls="pills-drivers" aria-selected="false">Pilotos</button>
		</li>
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="pills-circuits-tab" data-bs-toggle="pill" data-bs-target="#pills-circuits" type="button" role="tab" aria-controls="pills-circuits" aria-selected="false">Circuitos</button>
		</li>
	</ul>
	<div class="tab-content" id="pills-tabContent">
		<div class="tab-pane fade show active" id="pills-teams" role="tabpanel" aria-labelledby="pills-teams-tab">
			<h2>Escuderías</h2>
			<form method="get" action="{{ path('admin') }}">
				<div class="form-group">
					<label for="seasonSelect">Selecciona una temporada a mostrar</label>
					<select class="form-control" id="seasonSelect" name="season_id" onchange="this.form.submit()">
						<option value="">Temporada...</option>
						{% for season in seasons %}
							<option value="{{ season.id }}" {% if season.id == selectedSeasonId %} selected {% endif %}>
								{{ season.seasonName }}
							</option>
						{% endfor %}
					</select>
				</div>
			</form>

			<div id="teamsContainer" class="row mt-4">
				{% if teams|length > 0 %}
					{% for team in teams %}
						<div class="col-md-4 mb-4">
							<div class="card h-100">
								<img src="/uploads/team_logos/{{ team.urlTeamLogo }}" class="card-img-top" alt="{{ team.fullNameTeam }}" style="object-fit: cover; height: 200px;">
								<div class="card-body d-flex flex-column">
									<h5 class="card-title">
										<a href="{{ teamUrls[team.id] }}">{{ team.fullNameTeam }}</a>
									</h5>
									<p class="card-text">
										<strong>Temporada:</strong>
										{{ team.seasonId.seasonName }}</p>
								</div>
							</div>
						</div>
					{% endfor %}
				{% else %}
					<div class="col-md-12">
						<div class="alert alert-warning">No hay equipos dados de alta para esta temporada.</div>
					</div>
				{% endif %}
			</div>
		</div>
		<div class="tab-pane fade" id="pills-drivers" role="tabpanel" aria-labelledby="pills-drivers-tab">
			<h2>Pilotos</h2>

		</div>
		<div class="tab-pane fade" id="pills-circuits" role="tabpanel" aria-labelledby="pills-circuits-tab">
			<h2>Circuitos</h2>
		</div>
	</div>


{% endblock %}
